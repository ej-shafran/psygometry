{{define "writing-page"}}

<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Psygometry</title>

	<script src="https://unpkg.com/htmx.org@1.9.11"></script>
</head>

<body>
	<form hx-post="/answers" hx-target="#target" hx-vals='{"session": "{{.Session}}"}'>
		<div id="target">
		{{template "writing" .Psychometry.WritingSection}}
		</div>

		<button type="submit">הבא</button>
	</form>

	<script>
		const url = new URL(location);
		url.searchParams.set("session", "{{.Session}}");
		history.pushState({}, "", url);
	</script>
</body>

{{end}}

{{define "section-page"}}

<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Psygometry</title>

	<script src="https://unpkg.com/htmx.org@1.9.11"></script>
</head>

<body>
	<form hx-post="/answers" hx-target="#target" hx-vals='{"session": "{{.Session}}"}'>
		<div id="target">
		{{template "section" index .Psychometry.Sections .Page}}
		</div>

		<button type="submit">הבא</button>
	</form>

	<script>
		const url = new URL(location);
		url.searchParams.set("session", "{{.Session}}");
		history.pushState({}, "", url);
	</script>
</body>

{{end}}

{{define "writing"}}

<fieldset>
	<p>{{.}}</p>

	<textarea name="WritingSection"></textarea>
</fieldset>

{{end}}

{{define "section"}}

<div>
	<h2>פרק {{template "kind" .}}</h2>

	{{range $j, $q := .Questions}}

	<fieldset>
		<legend>{{$q.Content}}</legend>

		{{range $k, $o := $q.Options}}
		<input id="Sections[{{$.Index}}][{{$j}}].Options[{{$k}}]"
			name="Sections[{{$.Index}}][{{$j}}]" type="radio" value="{{$k}}">
		<label for="Sections[{{$.Index}}][{{$j}}].Options[{{$k}}]">{{$o}}</label>
		{{end}}
	</fieldset>

	{{end}}
</div>

{{end}}

{{define "kind"}}

{{if eq .Kind "V"}}
מילולי
{{else if eq .Kind "Q"}}
כמותי
{{else if eq .Kind "E"}}
אנגלית
{{end}}

{{end}}
