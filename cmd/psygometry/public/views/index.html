{{define "index"}}


<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Psygometry</title>

	<script src="https://unpkg.com/htmx.org@1.9.11"></script>
</head>

<body>
	<form hx-post="/answers" hx-swap="none" hx-on::after-request="this.reset()">
		{{template "writing" .WritingSection}}

		{{template "sections" .VSections}}
		{{template "sections" .QSections}}
		{{template "sections" .ESections}}

		<button type="submit">Submit</button>
	</form>
</body>

</html>

{{end}}

{{define "writing"}}

<fieldset>
	<p>{{.}}</p>

	<textarea name="WritingSection"></textarea>
</fieldset>

{{end}}

{{define "sections"}}

{{range $i, $s := .}}

<div>
	<h2>Section</h2>

	{{range $j, $q := $s.Questions}}

	<fieldset>
		<legend>{{$q.Content}}</legend>

		{{range $k, $o := $q.Options}}
		<input id="{{$s.Kind}}Sections[{{$i}}][{{$j}}].Options[{{$k}}]"
			name="{{$s.Kind}}Sections[{{$i}}][{{$j}}]" type="radio" value="{{$k}}">
		<label for="{{$s.Kind}}Sections[{{$i}}][{{$j}}].Options[{{$k}}]">{{$o}}</label>
		{{end}}
	</fieldset>

	{{end}}
</div>

{{end}}

{{end}}
